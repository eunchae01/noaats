# 노아의 가계부 - 기획서 및 개발 문서

## 1. 개요

### 1.1 주제 선택 배경

직장생활을 시작한 지 어느덧 3년. 월급이 들어오면 어디론가 빠져나가고, 월말이 되면 "이번 달도 돈이 어디 간 거지?"라는 생각이 반복된다. 주변에서는 슬슬 재테크 이야기가 나오고, 적금이나 투자 이야기를 하지만, 정작 **매달 얼마를 쓰고 있는지, 투자에 돌릴 여유 자금이 얼마인지**조차 파악이 안 되는 상황이다.

시중의 가계부 앱들은 많지만, 대부분 지출 기록에만 초점을 맞추거나 기능이 지나치게 복잡하다. 필요한 건 **단순한 기록이 아니라, 내 소비를 분석하고 예산 대비 현황을 한눈에 보여주는 도구**다.

이번 과제를 통해 평소 필요했던 가계부를 직접 만들어보기로 했다. 실제로 내가 쓸 수 있는 앱을 만들면서, 동시에 문제 해결 과정을 보여줄 수 있는 좋은 기회라고 판단했다.

### 1.2 프로젝트 목표

직장 3년차 "노아"가 매일 겪는 세 가지 질문에 답하는 웹 애플리케이션을 만든다:

| 질문 | 기능 |
|------|------|
| "이번 달 돈이 어디로 갔지?" | 지출 분석 |
| "예산 대비 얼마나 썼지?" | 예산 분석 |
| "내 소비 패턴이 어떻게 변하고 있지?" | 소비 패턴 |

---

## 2. 문제 정의

### 2.1 해결하려는 문제

직장인 "노아"는 다음과 같은 문제를 겪고 있다:

**문제 1: 지출 파악 불가**
- 월급날 이후 돈이 어디로 빠져나가는지 모른다
- 카드 명세서를 봐도 항목이 너무 많아 분류가 안 된다
- "체감 지출"과 "실제 지출"의 괴리가 크다

**문제 2: 예산 관리 부재**
- 매달 예산을 세우지 않으니 과소비가 반복된다
- 특정 카테고리(식비, 여가)에서 지나치게 많이 쓰고 있는지 모른다
- 월 중간에 예산 대비 현황을 확인할 방법이 없다

**문제 3: 소비 트렌드 미파악**
- 지난 몇 개월간 소비가 늘었는지 줄었는지 감이 없다
- 어떤 카테고리의 지출이 증가 추세인지 모른다
- 재테크를 시작하려 해도 여유 자금이 얼마인지 산출이 안 된다

### 2.2 왜 이 문제를 선택했는가

1. **실제 본인의 필요**: 3년차가 되면서 재테크에 관심이 생겼지만, 가계부 없이는 현황 파악 자체가 어려움
2. **보편적인 문제**: 사회 초년생~ 대다수가 겪는 공통 문제
3. **측정 가능한 목표**: "월별 카테고리별 지출 비율 파악" → 달성 여부를 명확히 확인 가능
4. **적절한 기술적 범위**: 이틀 내 구현 가능하면서도, 의미 있는 분석 기능을 포함할 수 있는 범위

### 2.3 핵심 기능 vs 부가 기능

| 구분 | 기능 | 설명 | 우선순위 |
|------|------|------|----------|
| **핵심** | 지출 기록 CRUD | 금액, 카테고리, 날짜, 설명을 입력하여 지출을 기록 | 1 |
| **핵심** | 카테고리별 예산 설정 | 월별로 카테고리(식비, 교통 등)마다 예산을 설정 | 2 |
| **핵심** | 예산 대비 지출 현황 | 카테고리별 예산 소진율을 진행바와 차트로 시각화 | 3 |
| **핵심** | 월별 소비 패턴 분석 | 최근 6개월 지출 추이를 라인/막대 차트로 시각화 | 4 |
| **핵심** | 대시보드 | 이번 달 요약(총지출, 예산잔여, 카테고리 분포)을 한눈에 | 5 |
| 부가 | 지난달 예산 복사 | 매월 예산을 새로 입력하지 않고 이전 달 복사 | - |
| 부가 | 지출 필터링/검색 | 날짜 범위, 카테고리별 필터로 원하는 지출만 조회 | - |
| 부가 | 예산 초과 알림 | 카테고리별 예산 80% 이상 사용 시 경고 표시 | - |
| 부가 | 전월 대비 변화율 | 카테고리별 전월 대비 증감률을 테이블로 제공 | - |

### 2.4 대상 사용자 정의

**페르소나: 노아 (28세, 직장 3년차)**

| 항목 | 내용                                         |
|------|--------------------------------------------|
| 나이 | 30세                                        |
| 직업 | IT 기업 개발자                                  |
| 월 실수령액 | 약 300만원                                    |
| 주요 지출 | 식비(외식 포함), 교통(자가용 유지비), 주거비(월세), 여가(취미/문화) |
| 재테크 경험 | 적금 1개만 유지 중, 투자 경험 없음                      |
| 가계부 경험 | 간헐적으로 기록했으나 3일 이상 지속한 적 없음             |
| 핵심 니즈 | 매달 어디에 얼마를 쓰는지 파악하고, 투자 여력을 확인하고 싶음        |
| 페인포인트 | 기록이 번거로움, 기록만 하고 분석은 안 됨, 예산 개념 자체가 없음     |

### 2.5 사용자 시나리오

**시나리오 1: 일상적인 지출 기록**
1. 노아가 점심에 동료와 식사를 하고 12,000원을 카드로 결제한다
2. 앱에 접속하여 "지출 추가"를 클릭한다
3. 카테고리 "식비", 금액 "12,000원", 설명 "점심 식사", 날짜 "오늘"을 입력한다
4. 저장하면 지출 목록에 즉시 반영된다

**시나리오 2: 월말 예산 점검**
1. 월말이 다가오자 노아는 대시보드에 접속한다
2. "이번 달 총지출: 210만원 / 예산: 230만원 / 잔여: 20만원"을 확인한다
3. 카테고리 도넛 차트에서 식비가 전체의 35%를 차지하고 있음을 본다
4. 예산 관리 페이지로 이동하여 식비 진행바가 빨간색(예산 초과)임을 확인한다
5. "다음 달에는 식비 예산을 좀 더 늘리거나, 외식을 줄여야겠다"고 판단한다

**시나리오 3: 소비 패턴 확인**
1. 3개월째 가계부를 기록한 노아가 소비 패턴 페이지에 접속한다
2. 월별 지출 라인 차트에서 지출이 꾸준히 증가 추세임을 확인한다
3. 카테고리별 누적 차트에서 "여가/오락" 비중이 매달 늘고 있음을 발견한다
4. "여가 지출을 조절하면 월 20~30만원 투자 여력이 생기겠다"고 결론 내린다

**시나리오 4: 새 달 예산 설정**
1. 새 달이 시작되어 예산 관리 페이지에 접속한다
2. "지난달 예산 복사" 버튼을 눌러 이전 달 예산을 그대로 가져온다
3. 지난달 분석을 바탕으로 식비 예산을 5만원 늘리고, 여가 예산을 5만원 줄인다
4. 조정된 예산으로 이번 달을 시작한다

### 2.6 예상 엣지 케이스 및 처리 방안

| 엣지 케이스 | 처리 방안 |
|-------------|-----------|
| 금액에 0원 또는 음수 입력 | 서버 유효성 검증으로 양수만 허용. "금액은 1원 이상이어야 합니다" 에러 메시지 |
| 매우 큰 금액 입력 (예: 9,999,999,999원) | BigDecimal(12,0)으로 최대 약 1조원까지 허용. 현실적 상한은 별도 제한하지 않음 |
| 미래 날짜에 지출 기록 | 허용 (예정된 지출을 미리 기록하는 유스케이스 존재) |
| 예산 미설정 상태에서 예산 분석 | 예산이 없는 카테고리는 "미설정"으로 표시, 진행바 대신 "예산을 설정하세요" 안내 |
| 지출 데이터 없는 달 | 차트에 0으로 표시, "이 달의 지출 기록이 없습니다" 안내 메시지 |
| 카테고리 선택 없이 폼 제출 | 필수 필드 유효성 검증으로 차단. "카테고리를 선택하세요" 에러 메시지 |
| 동일 카테고리에 같은 달 예산 중복 설정 | DB Unique 제약 + 서비스 로직에서 기존 값 업데이트(upsert) 처리 |
| 한 달에 수백 건의 지출 기록 | 페이지네이션(10건/페이지)으로 성능 유지 |

---

## 3. 기능 정의

### 3.1 페이지 구성

**대시보드 (`/`)**
- 이번 달 요약 카드 4개: 총지출, 총예산, 잔여예산, 거래건수
- 카테고리 도넛 차트 (이번 달 지출 비율)
- 예산 초과/근접 알림 목록 (80% 이상 소진 카테고리)
- 최근 지출 5건 미리보기

**지출 관리 (`/expenses`)**
- 지출 목록 (필터: 날짜 범위, 카테고리 / 정렬: 날짜 내림차순)
- 페이지네이션 (10건/페이지)
- 추가/수정 폼: 날짜, 카테고리, 금액, 설명, 메모(선택)
- 삭제 기능

**예산 관리 (`/budgets`)**
- 월 선택기
- 카테고리별 예산 설정 (인라인 편집)
- 예산 vs 실제 진행바 (초록 <70%, 노랑 70~100%, 빨강 >100%)
- 예산 vs 실제 가로 막대 비교 차트
- 지난달 예산 복사 기능

**소비 패턴 (`/patterns`)**
- 월별 총지출 추이 라인 차트 (최근 6개월)
- 카테고리별 월별 누적 막대 차트
- 전월 대비 카테고리별 증감률 테이블

### 3.2 카테고리 분류

| 카테고리 | 한글명 | 색상 | 설명 |
|----------|--------|------|------|
| FOOD | 식비 | #FF6384 | 식사, 간식, 커피, 식료품 구매 |
| TRANSPORT | 교통 | #36A2EB | 대중교통, 택시, 주유, 주차 |
| ENTERTAINMENT | 여가/오락 | #FFCE56 | 영화, 게임, 취미, 여행 |
| HOUSING | 주거/통신 | #4BC0C0 | 월세, 관리비, 통신비, 공과금 |
| SHOPPING | 쇼핑 | #9966FF | 의류, 생필품, 전자기기 |
| HEALTH | 의료/건강 | #FF9F40 | 병원, 약국, 헬스장 |
| EDUCATION | 교육/자기개발 | #C9CBCF | 강의, 도서, 자격증 |
| OTHER | 기타 | #7C8A96 | 경조사, 기부, 분류 불가 |

---

## 4. 기술 설계

### 4.1 기술 스택

| 영역 | 기술 | 선택 근거 |
|------|------|-----------|
| Backend | Spring Boot 4.0.2 + Java 17 | 프로젝트 초기 세팅에 포함. 안정적인 엔터프라이즈 프레임워크 |
| Frontend | Thymeleaf (SSR) | 서버 사이드 렌더링으로 SPA 대비 빠른 개발. 별도 빌드 불필요 |
| Database | H2 (File 모드) | 별도 DB 설치 불필요, 재시작 시에도 데이터 유지 |
| ORM | Spring Data JPA + Hibernate | 엔티티 매핑, JPQL 집계 쿼리 지원 |
| CSS | Bootstrap 5 (CDN) | 빌드 도구 불필요, 풍부한 컴포넌트(카드, 테이블, 진행바, 폼) |
| Chart | Chart.js 4 (CDN) | 경량, 도넛/라인/막대 차트 모두 지원 |
| 금액 처리 | BigDecimal | 부동소수점 오류 방지. 원화는 소수점 없으므로 DECIMAL(12,0) |

### 4.2 도메인 모델

```
Expense (지출)
├── id: Long (PK, Auto)
├── amount: BigDecimal (NOT NULL, 양수)
├── category: ExpenseCategory (Enum, NOT NULL)
├── description: String (최대 200자, NOT NULL)
├── expenseDate: LocalDate (NOT NULL)
├── memo: String (최대 500자, 선택)
├── createdAt: LocalDateTime (자동)
└── updatedAt: LocalDateTime (자동)

Budget (예산)
├── id: Long (PK, Auto)
├── category: ExpenseCategory (Enum, NOT NULL)
├── amount: BigDecimal (NOT NULL, 양수)
├── yearMonth: String (NOT NULL, "2026-02" 형식)
├── createdAt: LocalDateTime (자동)
└── updatedAt: LocalDateTime (자동)
└── UNIQUE(category, yearMonth)
```

### 4.3 아키텍처

```
[Browser] → [Thymeleaf Controller] → [Service] → [Repository] → [H2 DB]
                                          ↑
[Chart.js] → [REST API Controller] ──────┘
```

- **Controller 계층**: Thymeleaf 뷰 렌더링 + REST API(차트 데이터)
- **Service 계층**: 비즈니스 로직, 집계 연산
- **Repository 계층**: JPA + JPQL 커스텀 쿼리
- **단일 사용자**: 인증/인가 없이 심플하게 (포트폴리오 프로젝트)

---

## 5. 엣지 케이스 상세

위 2.6절 참조. 주요 원칙:
- **입력 검증은 서버에서**: `@Valid` + `BindingResult`로 모든 폼 입력 검증
- **금액은 BigDecimal**: 부동소수점 오류 원천 차단
- **빈 데이터 대응**: 데이터 없는 상태에서도 에러 없이 안내 메시지 표시
- **중복 방지**: Budget의 (category, yearMonth) Unique 제약 + upsert 로직

---

## 6. 개선 과정 기록

> 이 섹션은 개발 과정에서 지속적으로 업데이트됩니다.

### v0.1 - 기획 단계 (2026-02-11)
- 주제 선택: "지출 관리 & 예산" - 실제 본인의 필요에서 출발
- 문제 정의: 3가지 핵심 질문 도출
- 페르소나 설정: 직장 3년차 "노아"
- 기술 스택 결정: Spring Boot + Thymeleaf + H2 + Bootstrap + Chart.js
- 핵심/부가 기능 분류 및 우선순위 설정

---

## 7. AI 활용 기록

> 이 섹션은 개발 과정에서 지속적으로 업데이트됩니다.

### 사용 도구
- **Claude Code (CLI)**: 프로젝트 전반의 설계, 코드 작성, 리뷰에 활용

### 활용 과정

**기획 단계**
- Claude Code에 과제 안내서 전문을 제공하고, 주제 선택부터 함께 논의
- 페르소나, 사용자 시나리오, 엣지 케이스를 대화하며 구체화
- AI가 제안한 기능 범위 중 이틀 내 구현 가능한 범위로 직접 조정
- 기획서 구조를 AI가 제안하고, 개인적 동기/배경은 본인이 직접 작성

**컨텍스트 제공 방식**
- 과제 안내서 원문, 평가 기준, 기술 스택 정보를 모두 제공
- 프로젝트 초기 세팅(build.gradle, 디렉토리 구조)을 AI가 직접 탐색하도록 함
- 한국어로 소통하며 한국 직장인 맥락에 맞는 카테고리/시나리오 설계
